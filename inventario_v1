# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/prerequisites.yml
# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/deploy_cluster.yml
  
# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/prerequisites.yml
# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/deploy_cluster.yml

#[root@ocp-all-in-one01 ocp-all-in-one]# 
#INSTALLER STATUS ********************************************************************************************************************************************
#Initialization                 : Complete (0:00:15)
#Health Check                   : Complete (0:01:30)
#Node Bootstrap Preparation     : Complete (0:20:44)
#etcd Install                   : Complete (0:00:55)
#NFS Install                    : Complete (0:00:16)
#Master Install                 : Complete (0:08:19)
#Master Additional Install      : Complete (0:07:20)
#Node Join                      : Complete (0:01:31)
#Hosted Install                 : Complete (0:00:54)
#Cluster Monitoring Operator    : Complete (0:01:14)
#Web Console Install            : Complete (0:00:32)
#Console Install                : Complete (0:00:38)
#Service Catalog Install        : Complete (0:03:39)
#Node Problem Detector Install  : Complete (0:00:09)
#[root@ocp-all-in-one01 ocp-all-in-one]#

#[root@ocp-all-in-one01 ocp-all-in-one]# oc get pods --all-namespaces
#NAMESPACE                           NAME                                              READY     STATUS    RESTARTS   AGE
#default                             docker-registry-1-ft5n7                           1/1       Running   0          1h
#default                             registry-console-1-v4mgl                          1/1       Running   0          1h
#default                             router-1-wvqn7                                    1/1       Running   0          1h
#kube-service-catalog                apiserver-cmd88                                   1/1       Running   0          1h
#kube-service-catalog                controller-manager-qzpb8                          1/1       Running   3          1h
#kube-system                         master-api-ocp-all-in-one01.example.com           1/1       Running   3          1h
#kube-system                         master-controllers-ocp-all-in-one01.example.com   1/1       Running   3          1h
#kube-system                         master-etcd-ocp-all-in-one01.example.com          1/1       Running   2          1h
#openshift-ansible-service-broker    asb-1-42qv5                                       1/1       Running   0          1h
#openshift-console                   console-7c6b745986-6ndhv                          1/1       Running   0          1h
#openshift-monitoring                alertmanager-main-0                               3/3       Running   0          1h
#openshift-monitoring                alertmanager-main-1                               3/3       Running   0          1h
#openshift-monitoring                alertmanager-main-2                               3/3       Running   0          1h
#openshift-monitoring                cluster-monitoring-operator-74fb8b6dcf-tc7f9      1/1       Running   0          1h
#openshift-monitoring                grafana-857fc848bf-rm4pk                          2/2       Running   0          1h
#openshift-monitoring                kube-state-metrics-75c4d6dc-p2pm2                 3/3       Running   0          1h
#openshift-monitoring                node-exporter-xp8g8                               2/2       Running   0          1h
#openshift-monitoring                prometheus-k8s-0                                  4/4       Running   1          1h
#openshift-monitoring                prometheus-k8s-1                                  4/4       Running   1          1h
#openshift-monitoring                prometheus-operator-7855c8646b-dq2p5              1/1       Running   0          1h
#openshift-node-problem-detector     node-problem-detector-ll224                       1/1       Running   0          1h
#openshift-node                      sync-mp8fm                                        1/1       Running   1          1h
#openshift-sdn                       ovs-tjlpl                                         1/1       Running   2          1h
#openshift-sdn                       sdn-2lw8n                                         1/1       Running   3          1h
#openshift-template-service-broker   apiserver-z65gg                                   1/1       Running   0          1h
#openshift-web-console               webconsole-85494cdb8c-mjm4x                       1/1       Running   0          1h
#[root@ocp-all-in-one01 ocp-all-in-one]# 
# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/openshift-monitoring/config.yml 
# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/metrics-server/config.yml 
# ansible-playbook -i inventario /usr/share/ansible/openshift-ansible/playbooks/openshift-metrics/config.yml

[OSEv3:children]

nfs

masters

etcd

nodes

[nfs]

ocp-all-in-one01.example.com 

[masters]

ocp-all-in-one01.example.com

[etcd]

ocp-all-in-one01.example.com

[nodes]

## All-In-One with CRI-O

#ocp.example.com openshift_node_group_name='node-config-all-in-one-crio' openshift_node_problem_detector_install=true

## All-In-One with Docker

ocp-all-in-one01.example.com openshift_node_group_name='node-config-all-in-one' openshift_node_problem_detector_install=true

[OSEv3:vars]
#https://catalog.redhat.com/software/containers/explore/
oreg_auth_user=6583642|ocp
oreg_auth_password="eyJhbGciOiJSUzUxMiJ9.eyJzdWIiOiIyN2U1NWI5YmM4N2Y0ZjY0OWU5Njg2YWM1NDY4MzNkNSJ9.fE9JRkstam1knBJuhNlQE5cjBUY3n7qGE4REPVat2FdCY3iQMSOFwTV0J99QTL3up4P987ojVVEwxvb8oHm6N2P6xWvdT3Ms9YAi0ChG4QmHY7-Bt1gLRanYc7kxsVhi3X-ItrceNA-r7UjGaB02qACYN8s07IhQmhiBwyPTY786B-WPMqd5bZkZxMQYeexGZ2vSwetC2MJPcA2GdlBjyxKJBHkQ1Cf9yTCuOEnn59Dzo7stYnnvbmKCQaqPklDpcMzuyfIHty4XxTilQGd3dyKY0UDy8rUsV2bBgs7Vadv410OzqnBCeVUt6DIPTmR--e7ElWL2wOkrmNRMAe6Og_OVP1lyn11JwCVHPVrSTI9sEtvF0l1yJ8aePxBheDx8_PmwCch0O0DkZA-YdyI64G3lChpSyc9cIwyoDvQyhkql-6pdY0fy4wHkkS4DuhaJVUf9SvWjh35fjsYmIi1KWNlKHaJdQIVHjj0FvUdrDalXyXDp9Ci7DLGQ1RpYWj2Ak5Ws7sXoo3C2r4xYPEhm5JVSNQTdiOIQoIRoo7ytuI1ncaHVlIJ-WxaKhJhMlVsqkGyQjUqL8Z-yBgDriXxrsbTWPAIrrMcmKU2QjNB_o1ILF4ULteqaUfPgNwQSSFrFEDrSHsoooX5IryrK1lfMQq1DjQgQrh7OXotU7Ct-Hro"

openshift_master_default_subdomain=apps.example.com
openshift_master_cluster_hostname=api.example.com
openshift_master_cluster_public_hostname=console.example.com
openshift_master_cluster_method=native

ansible_ssh_user=root
openshift_deployment_type=openshift-enterprise
openshift_disable_check=openshift_check_min_host_memory_gb
openshift_disable_check=memory_availability

# Storage persistente - VMWARE
openshift_cloudprovider_kind=vsphere
openshift_cloudprovider_vsphere_username=administrator@vsphere.local 
openshift_cloudprovider_vsphere_password=W@ster123
openshift_cloudprovider_vsphere_host=192.168.100.102
openshift_cloudprovider_vsphere_datacenter=SVC-DC
openshift_cloudprovider_vsphere_datastore=LAB_Local_Raid5

# Autenticacao
openshift_master_identity_providers=[{'name': 'Local_Auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider'}]
openshift_master_htpasswd_users={'pedro': '$apr1$QD/hlKZ9$LlvF0L6/EDo/gpKNU/QW50'} #master

# Registry
#openshift_hosted_registry_selector='node-role.kubernetes.io/infra=true'
openshift_hosted_registry_replicas=1
openshift_hosted_manage_registry=true
openshift_hosted_manage_registry_console=true
#openshift_hosted_registry_clusterip=172.30.10.10
openshift_hosted_registry_routehost=registry.example.com
openshift_hosted_registry_storage_kind=vsphere
openshift_hosted_registry_storage_access_modes=['ReadWriteOnce']
openshift_hosted_registry_storage_annotations=['volume.beta.kubernetes.io/storage-provisioner: kubernetes.io/vsphere-volume']
openshift_hosted_registry_storage_volume_size=50Gi
openshift_hosted_registry_cert_expire_days=3650

